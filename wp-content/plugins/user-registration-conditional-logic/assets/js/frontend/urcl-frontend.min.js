jQuery(document).ready(function(e){var i={delegateRule:function(e,r,t,d,n){if("group"===t.type)Array.isArray(t.conditions)&&t.conditions.forEach(function(t){i.delegateRule(e,r,t,d,n)});else{var a='.ur-field-item[data-field-id="'+t.triggerer_id+'"] .ur-frontend-field, .form-row#user_registration_'+t.triggerer_id+'_field .urwc-field-input, .ur-field-item[data-field-id="'+t.triggerer_id+'"] .urwc-field-input, .ur-field-item[data-field-id="'+t.triggerer_id+'"] .ur-edit-profile-field';n.on("change keyup",a,function(){i.run(r,d,n)})}},run:function(e,r,t){var d=i.evaluateCondition(r.logic_map,t),n=t.find('.ur-field-item[data-field-id="'+e+'"]'),a=t.find("#urcl_hide_fields").val(),o=new Set(a?JSON.parse(a):[]),l=null;0===n.length&&(n=t.find(".form-row#"+e)),d?"hide"===r.action?(n.hide(),l=!0):(n.show(),l=!1):"hide"===r.action?(n.show(),l=!1):(n.hide(),l=!0),l?o.add(e):o["delete"](e),t.find("#urcl_hide_fields").val(JSON.stringify(Array.from(o)))},getFieldValue:function(i,r){var t=r.find('.ur-field-item[data-field-id="'+i+'"]'),d=t.find(".ur-frontend-field").length?t.find(".ur-frontend-field"):t.find(".ur-edit-profile-field");if(t.find(".urwc-field-input").length&&(d=t.find(".urwc-field-input")),t.is(".field-checkbox")||"checkbox"===d.attr("type")){var n=[];return d.parent().find(":checked").each(function(){n.push(e(this).val())}),n}return t.is(".field-radio")||"radio"===d.attr("type")?d.parent().find(":checked").val():t.is(".field-privacy_policy")||t.is(".field-mailchimp")||t.is(".field-separate_shipping")?d.is(":checked")?"checked":"unchecked":d.val()},evaluateCondition:function(e,r){if("group"===e.type){if(Array.isArray(e.conditions)){e.logic_gate&&""!==e.logic_gate||(e.logic_gate="OR");for(var t=0;t<e.conditions.length;t++){var d=e.conditions[t],n=this.evaluateCondition(d,r);if("OR"===e.logic_gate&&!0===n)return!0;if("AND"===e.logic_gate&&!1===n)return!1;if("NOT"===e.logic_gate&&!0===n)return!1}return"OR"!==e.logic_gate&&("AND"===e.logic_gate||"NOT"===e.logic_gate)}return!0}var a=e.value,o=this.getFieldValue(e.triggerer_id,r);return!!i.resolveOperator(a,o,e.operator)},resolveOperator:function(e,r,t){switch(t){case"is":return Array.isArray(e)&&Array.isArray(r)?i.compareArrays(e,r):Array.isArray(r)?r.includes(e):e===r;case"is_not":return Array.isArray(e)&&Array.isArray(r)?i.compareArrays(e,r):Array.isArray(r)?!r.includes(e):e!==r;default:return!1}},compareArrays:function(e,i){if(e.length!==i.length)return!1;for(var r=0;r<e.length;r++){var t=e[r];if(!i.includes(t))return!1}return!0}};e(document).on("user_registration_frontend_before_form_submit",function(i,r,t){var d=e("#urcl_hide_fields");null!=d&&d.length>0&&(r.urcl_hide_fields=d.val())}),e(".urcl-hide-field").closest(".ur-field-item").hide(),e(".urcl-hide-field").removeAttr("required"),e("form, .user-registration").each(function(){if(e(this).is(".register")||e(this).is(".user-registration-EditProfileForm")||e(this).is(".user-registration")){var r=e(this).data("form-id"),t=e(r?'form[data-form-id="'+r+'"':this),d=e(this).find(".ur-field-item");0===d.length&&(d=e(this).find(".form-row"));var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("id","urcl_hide_fields"),n.setAttribute("name","urcl_hide_fields"),n.setAttribute("value","");var a=document.querySelector("#user-registration-form-"+r+" form.register");a&&a.appendChild(n),d.each(function(){if("yes"===e(this).data("conditional-logic-enabled")){var r=e(this).data("conditional-logic-map"),d=e(this).data("field-id");if(d||(d=e(this).attr("id")),"object"!=typeof r)try{r=JSON.parse(r)}catch(n){}r&&""!==r&&"object"==typeof r&&(i.run(d,r,t),i.delegateRule(r.action,d,r.logic_map,r,t))}})}})});